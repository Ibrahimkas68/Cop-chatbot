spring.application.name=cop-chatbot

# PostgreSQL Configuration
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/db_cop_2025_06}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:ibrahimkasmi}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:new_password}
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# MongoDB Configuration
spring.data.mongodb.uri=${SPRING_DATA_MONGODB_URI:mongodb://localhost:27017/smart_search}

# LDA Model Configuration
app.lda.model.path=./data/lda_model.ser
app.lda.training.enabled=true
app.lda.training.cron=0 0 3 * * ?  # Daily at 3 AM

# Enable scheduling
spring.task.scheduling.pool.size=2
server.port=8083

# application.properties

# Server configuration
server.tomcat.max-connections=10000
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=10
server.tomcat.accept-count=100

# Request size limits
spring.servlet.multipart.max-file-size=1MB
spring.servlet.multipart.max-request-size=1MB

# Token-bucket Rate Limiter (Redis-backed)
rate.limit.capacity=15
rate.limit.refillRate=15
rate.limit.refillIntervalSeconds=60

# Blacklist (per-IP) configuration
rate.limit.blacklist.threshold=100
rate.limit.blacklist.ttlSeconds=300
rate.limit.counter.windowSeconds=60

# Resilience4j Rate Limiter (legacy, not used by Redis limiter)
resilience4j.ratelimiter.instances.default.limit-for-period=15
resilience4j.ratelimiter.instances.default.limit-refresh-period=1m
resilience4j.ratelimiter.instances.default.timeout-duration=100ms

# Redis Configuration
spring.data.redis.host=${SPRING_REDIS_HOST:cop-redis}
spring.data.redis.port=${SPRING_REDIS_PORT:6379}

